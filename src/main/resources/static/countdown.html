<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="./css/main.css">
  <script src="./js/urlApi.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Laskuri</title>
</head>
<body class="black">

<h2 id="timer"></h2>
<h2 id="destination"></h2>

<script>
  // Epoch seconds
  const expiresAt = getQueryParam('expiresAt');
  const lat = getQueryParam('lat');
  const lon = getQueryParam('lon');

  document.getElementById("destination").innerText =
      lat + ', ' + lon;

  updateTimer();

  function updateTimer() {
    var seconds = expiresAt - Math.round(new Date().getTime() / 1000);
    if(seconds < 0) { seconds = 0;}

    const minutes = Math.floor(seconds / 60);
    const leftSeconds = seconds - minutes * 60;

    document.getElementById("timer").innerText = minutes + 'min ' + leftSeconds + 'seconds';

    if(seconds > 0)
      setTimeout(updateTimer, 1000);
  }


</script>

</body>
</html>